url_api = "https://re.jrc.ec.europa.eu/api/seriescalc?lat=45&lon=8&startyear=2015&endyear=2016&month=0&showtemperatures=1&outputformat=json&browser=1"
#revoir pour \'PVGIS-ERA5\'
"""
liste des clés : Rayonnement horaire (moyenne de 2007 à 2020 pour chaque jour)
lat : (51°05'21" N à 41°19'N)
lon : (5°09'04" W à 9°33'36"E)
raddatabase : in {"PVGIS-ERA5" ; "PVGIS-COSMO"}, pour les données Européennes la première devrait suffir/convenir.
startyear :
endyear :
month : 0 (to have data for all months)
showtemperatures : 1
outputformat : json
browser : in {0 ; 1} (indic(if you access the web service from a web browser and want to save the data to a file.))



pvtechchoice : in {"crystSI","CIS",CdTe","Inconnu"}, pour comparer ? au moins tracer une carte à technologie PV fixe ?!
(horizon?)
"""
import requests
import pandas as pd
import csv

req=requests.get(url_api)

wb = req.json()

import json
text = json.dumps(wb, sort_keys=True, indent=4)
wbo = wb['outputs']
texto = json.dumps(wbo, sort_keys=True, indent=4)
wboh = wb['outputs']['hourly']
textoh = json.dumps(wboh, sort_keys=True, indent=4)
#info = json.loads(data)
new_textoh=textoh[6:-2]
new_new='{'+textoh[1:2]+':'+textoh[2:-1]+'}'


#df0 = pd.read_json(texto, orient='index')
df = pd.read_json(textoh, lines=True)




